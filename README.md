# –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (JWT)

–ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ JWT —Ç–æ–∫–µ–Ω–æ–≤. –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∏—Ö —Ä–æ–ª—è–º–∏,
–ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞, –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –≤—ã–¥–∞—á–µ–π Access/Refresh —Ç–æ–∫–µ–Ω–æ–≤. –°–µ—Ä–≤–∏—Å —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –≤ –≤–∏–¥–µ JWKS, —á—Ç–æ–±—ã
–¥—Ä—É–≥–∏–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–≥–ª–∏ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∏ –≤—ã–¥–∞–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ

## ‚ú® –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≥–∏–±–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º—É—é —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–æ–º, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
—Ä–æ–ª–µ–π, —É—á–µ—Ç–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∏ –ø—Ä–∞–≤. –ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏.

---

### üß© 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:

- **—Ä–æ–ª–µ–π**
- **—É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**
- **–ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**

üîÑ **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**

| –†–µ–∂–∏–º            | –û–ø–∏—Å–∞–Ω–∏–µ                                                                   |
|------------------|----------------------------------------------------------------------------|
| `ON_TABLE_EMPTY` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞         |
| `ON_RELOAD`      | –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–∏—Å–∏; –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ ‚Äî —Å–æ–∑–¥–∞–µ—Ç—Å—è |

‚öôÔ∏è **–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:**

- **–†–æ–ª–∏ –∏ –∞–¥–º–∏–Ω-–∞–∫–∫–∞—É–Ω—Ç:** `ON_TABLE_EMPTY`
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:** `ON_RELOAD`

üõ†Ô∏è –í –±—É–¥—É—â–µ–º –¥–æ–±–∞–≤–∏—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∏–º–∏ —Ä–µ–∂–∏–º–∞–º–∏ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

---

### üîê 2. –†–æ–ª–∏

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ–±–ª–∞–¥–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–æ–ª—è–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ. –ö–∞–∂–¥–∞—è —Ä–æ–ª—å —Å–≤—è–∑–∞–Ω–∞ —Å –Ω–∞–±–æ—Ä–æ–º **–ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞**, –∫–æ—Ç–æ—Ä—ã–µ
–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

üìå **–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ä–æ–ª—è–º–∏:**

| –ú–µ—Ç–æ–¥    | URL                                             | –û–ø–∏—Å–∞–Ω–∏–µ                            |
|----------|-------------------------------------------------|-------------------------------------|
| `GET`    | `/api/v1/jwt-auth/roles`                        | –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ä–æ–ª–µ–π (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π) |
| `GET`    | `/api/v1/jwt-auth/roles/{roleName}`             | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ –∏–º–µ–Ω–∏             |
| `POST`   | `/api/v1/jwt-auth/roles`                        | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Ä–æ–ª–∏                 |
| `PATCH`  | `/api/v1/jwt-auth/roles/{roleName}/permissions` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —É —Ä–æ–ª–∏      |
| `DELETE` | `/api/v1/jwt-auth/roles/{roleName}`             | –£–¥–∞–ª–µ–Ω–∏–µ —Ä–æ–ª–∏                       |

---

### üë• 3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —É—á–µ—Ç–Ω—ã–º–∏ –∑–∞–ø–∏—Å—è–º–∏, –≤–∫–ª—é—á–∞—è –º—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏ —Å–º–µ–Ω—É –ø–∞—Ä–æ–ª—è.

üìå **–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:**

| –ú–µ—Ç–æ–¥    | URL                                      | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|----------|------------------------------------------|---------------------------------------------|
| `GET`    | `/api/v1/jwt-auth/users`                 | –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π) |
| `GET`    | `/api/v1/jwt-auth/users/{uuid}`          | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ UUID              |
| `POST`   | `/api/v1/jwt-auth/users`                 | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                |
| `DELETE` | `/api/v1/jwt-auth/users/{uuid}`          | –ú—è–≥–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                |
| `PATCH`  | `/api/v1/jwt-auth/users/{uuid}/password` | –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                 |

---

### üõ°Ô∏è 4. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞** –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å–æ Spring `@ComponentScan`.

üîç –î–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è `@PermissionScan`, –≤ –∫–æ—Ç–æ—Ä—É—é –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –ø–∞–∫–µ—Ç—ã, –≥–¥–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏—Å–∫–∞—Ç—å –ø—Ä–∞–≤–∞.

üß© **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

- –°–∫–∞–Ω–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –≤–∏–¥–µ **–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç **–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞**.
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä—è—Ç—å –∏–º–µ–Ω–Ω–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –∏–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è.
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∞–Ω–Ω–æ—Ç–∏—Ä—É—é—Ç—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

üí° –≠—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∞ –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é –∏—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å.

üìå **–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞:**

| –ú–µ—Ç–æ–¥    | URL                                             | –û–ø–∏—Å–∞–Ω–∏–µ                                   |
|----------|-------------------------------------------------|--------------------------------------------|
| `GET`    | `/api/v1/jwt-auth/permissions`                  | –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π) |
| `GET`    | `/api/v1/jwt-auth/permissions/{id}`             | –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –ø–æ ID              |
| `POST`   | `/api/v1/jwt-auth/permissions`                  | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞              |
| `DELETE` | `/api/v1/jwt-auth/permissions/{id}`             | –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞                     |
| `PATCH`  | `/api/v1/jwt-auth/permissions/{id}/description` | –°–º–µ–Ω–∞ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞               |

---

### üîë 5. JWKS (JSON Web Key Set)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ JWT –≤ —Ñ–æ—Ä–º–∞—Ç–µ **JWKS**.

üìç **–ü—É–±–ª–∏—á–Ω—ã–π URL:**

```html
GET .../.well-known/jwks.json
```

üì• **–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:**

```json
{
  "keys": [
    {
      "kty": "RSA",
      "alg": "RS256",
      "n": "‚Ä¶",
      "e": "‚Ä¶"
    }
  ]
}
```

---

<details>
  <summary>–ü—Ä–∏–º–µ—Ä –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –∏–∑ JWKS</summary>

–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ (–Ω–∞ Java), –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### üîß –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ RestClient

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∫ –ø—Ä–∏–º–µ—Ä—É, RestClient

```java

@Bean
public RestClient restClient(RestClient.Builder restClientBuilder,
                             @Value("${app.jwt-auth.server.base-url}") String jwtAuthServerBaseUrl) {
    return restClientBuilder
            .baseUrl(jwtAuthServerBaseUrl)
            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)
            .build();
}
```

### üîß –®–∞–≥ 2: –ü–æ–ª—É—á–∏—Ç–µ JWKS —Å —Å–µ—Ä–≤–µ—Ä–∞

#### üß© –°—Ç—Ä—É–∫—Ç—É—Ä–∞ DTO

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω —Å–ª–µ–¥—É—é—â–∏–º –∫–ª–∞—Å—Å–æ–º:

```java
public record JwksDto(
        List<KeyBody> keys
) {
    @Data
    @Builder
    public static class KeyBody {
        private final String kty;
        private final String alg;
        private final String n;
        private final String e;

        public static KeyBodyBuilder RSA_KEY = KeyBody.builder()
                .alg("RS256")
                .kty("RSA");
    }
}
```

–î–∞–ª–µ–µ, —Å–¥–µ–ª–∞–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```java
private JwksDto fetchJwksFromAuthServer() {
    return restClient.get()
            .uri("/.well-known/jwks.json")
            .retrieve()
            .body(JwksDto.class);
}
```

### üîß –®–∞–≥ 3: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –∏–∑ JWKS

–î–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è `RSAPublicKey` –∏–∑ –ø–æ–ª–µ–π `n` (–º–æ–¥—É–ª—å) –∏ `e` (—ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º:

```java
private PublicKey restorePublicKey(String base64Modulus, String base64Exponent) throws Exception {
    byte[] modulusBytes = Base64.getUrlDecoder().decode(base64Modulus);
    byte[] exponentBytes = Base64.getUrlDecoder().decode(base64Exponent);

    BigInteger modulus = new BigInteger(1, modulusBytes);
    BigInteger exponent = new BigInteger(1, exponentBytes);

    RSAPublicKeySpec spec = new RSAPublicKeySpec(modulus, exponent);
    KeyFactory factory = KeyFactory.getInstance("RSA");

    return factory.generatePublic(spec);
}
```

### üîß –®–∞–≥ 4: –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ –ø–æ–¥–ø–∏—Å—å —Ç–æ–∫–µ–Ω–∞

#### –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –í –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–µ `io.jsonwebtoken`

```java
    public void verifyTokenSignature(String token, PublicKey publicKey) throws JwtException {
    Jwts.parser()
            .verifyWith(publicKey)
            .build()
            .parseSignedClaims(token);
}
```

</details>

### ‚öôÔ∏è 6. –ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

üß© –í –ø—Ä–æ–µ–∫—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–¥—É–ª—å, –∫–æ—Ç–æ—Ä—ã–π **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –≤–∞–ª–∏–¥–∞—Ü–∏–∏**, –æ—Å–Ω–æ–≤–∞–Ω–Ω–æ–π –Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö –∏–∑ –ø–∞–∫–µ—Ç–∞ `Jakarta Validation API`, —Ç–∞–∫–∏—Ö –∫–∞–∫ `@NotNull`, `@Size`, `@Min` –∏ –¥—Ä—É–≥–∏—Ö.

–° –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± —ç—Ç–æ–º –º–æ–¥—É–ª–µ –º–æ–∂–Ω–æ –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è [–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://github.com/Stinper/spring-jwt-auth/tree/main/error-response-api) üìÑ


## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫ API

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º —Å–µ—Ä–≤–∏—Å–∞ –æ–ø–∏—Å–∞–Ω–∞ —Å –ø–æ–º–æ—â—å—é Swagger UI

#### URL –∞–¥—Ä–µ—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

```http
  GET .../swagger-ui.html
```

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –ø—Ä–æ–µ–∫—Ç–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –≥–∏–±–∫–æ –≤–ª–∏—è—Ç—å –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –í —Ç–∞–±–ª–∏—Ü–µ
–Ω–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç)

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è        | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                                        |
|-----------------------------|-----------------------|-------------------------------------------------------------------|
| `JWTAUTH_ADMIN_EMAIL`       | _–ù–µ—Ç_                 | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**. –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞  |
| `JWTAUTH_ADMIN_PASSWORD`    | _–ù–µ—Ç_                 | **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**. –ü–∞—Ä–æ–ª—å —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞             |
| `JWTAUTH_ADMIN_ROLE_NAME`   | `ROLE_ADMIN`          | –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–µ –≤ —Å–∏—Å—Ç–µ–º–µ              |
| `JWTAUTH_ADMIN_ROLE_PREFIX` | `Admin`               | –ü—Ä–µ—Ñ–∏–∫—Å —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏–º–µ–Ω–∏ —Ä–æ–ª–∏) |
| `JWTAUTH_DB_HOST`           | `localhost`           | –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL                                       |
| `JWTAUTH_DB_PORT`           | `5432`                | –ü–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL                                       |
| `JWTAUTH_DB_NAME`           | `jwt_auth`            | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL                                        |
| `JWTAUTH_DB_USER`           | `postgres`            | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö                                      |
| `JWTAUTH_DB_PASSWORD`       | `123`                 | –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö                                   |

## üöÄ –ó–∞–ø—É—Å–∫ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Docker Compose**. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ
–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- üê≥ [Docker](https://www.docker.com/products/docker-desktop)
- üß© [Docker Compose](https://docs.docker.com/compose/)

---

### üîß –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/Stinper/spring-jwt-auth.git
cd spring-jwt-auth
```

### üîß –®–∞–≥ 2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–µ–∫—Ç–∞ –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env —Ñ–∞–π–ª–µ –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è     | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                      |
|--------------------------|-------------------------------------------------|
| `JWTAUTH_ADMIN_EMAIL`    | –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞ —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| `JWTAUTH_ADMIN_PASSWORD` | –ü–∞—Ä–æ–ª—å —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞            |                  

### üîß –®–∞–≥ 3: –î–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É

```bash
docker-compose up --build
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É

```http
  http://localhost:8080/
```

üí° –°–æ–≤–µ—Ç: –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ docker-compose.yml –∏–ª–∏
.env —Ñ–∞–π–ª–µ.

## üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Gradle** –¥–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å
—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω [Gradle](https://gradle.org/install/) –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±–µ—Ä—Ç–∫—É `./gradlew`, –ø–æ—Å—Ç–∞–≤–ª—è–µ–º—É—é —Å –ø—Ä–æ–µ–∫—Ç–æ–º.

---

### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```bash
./gradlew test
```

### üöÄ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Å—Ç—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞

```bash
./gradlew test --tests com.example.MyTestClass
```

#### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º

```bash
./gradlew test --tests "myTestMethod"
```

### üìÇ –û—Ç—á—ë—Ç—ã –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –æ—Ç—á–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ HTML –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—É—Ç–∏:

```bash
.../build/reports/tests/test/index.html
```

